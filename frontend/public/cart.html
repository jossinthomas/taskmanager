<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Brissie Bookstore - Cart</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
    <style>
        body {
            background-color: white;
        }

        .cart-container {
            margin-top: 20px;
        }

        .cart-item {
            border: 2px solid #ADD8E6;
            border-radius: 10px;
            padding: 1rem;
            text-align: center;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .cart-item img {
            width: 80px;
            border-radius: 5px;
        }

        .remove-btn {
            background-color: red;
            color: white;
            border: none;
            padding: 5px 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        .remove-btn:hover {
            background-color: darkred;
        }

        .total-payment {
            font-size: 1.2rem;
            font-weight: bold;
            text-align: center;
            margin-top: 20px;
        }
    </style>
</head>
<body class="d-flex flex-column min-vh-100">

    <header class="d-flex justify-content-between align-items-center px-4 py-3 bg-light">
        <h1 class="fw-bold text-primary">Brissie Bookstore - Cart</h1>
        <button class="btn btn-danger logout-btn" onclick="window.location.href='index.html'">Logout</button>
    </header>

    <main class="container cart-container">
        <h2 class="text-center mb-4">Your Cart</h2>
        <div id="cart-items"></div>

        <!-- Total Payment Display -->
        <div class="total-payment">Total: $<span id="total-price">0.00</span></div>

        <!-- Navigation Buttons -->
        <div class="text-center mt-4">
            <button class="btn btn-warning" onclick="window.location.href='books.html'">Go Back & Add More</button>
            <button class="btn btn-success" onclick="checkout()">Proceed to Payment</button>
        </div>
    </main>

    <script>
        function loadCart() {
            let cartItems = JSON.parse(localStorage.getItem("cart")) || [];
            let cartContainer = document.getElementById("cart-items");
            let totalPriceElement = document.getElementById("total-price");
            let totalPrice = 0;

            cartContainer.innerHTML = "";

            if (cartItems.length === 0) {
                cartContainer.innerHTML = "<p class='text-center'>Your cart is empty.</p>";
                totalPriceElement.innerText = "0.00";
                return;
            }

            cartItems.forEach((item, index) => {
                let priceValue = parseFloat(item.price.replace('$', '')); // Convert price to number
                totalPrice += priceValue;

                let cartItem = document.createElement("div");
                cartItem.className = "cart-item";

                cartItem.innerHTML = `
                    <img src="${item.image}" alt="Book">
                    <p>${item.bookName} - ${item.price}</p>
                    <button class="remove-btn" onclick="removeItem(${index})">Remove</button>
                `;
                cartContainer.appendChild(cartItem);
            });

            totalPriceElement.innerText = totalPrice.toFixed(2); // Display total price
        }

        function removeItem(index) {
            let cartItems = JSON.parse(localStorage.getItem("cart")) || [];
            cartItems.splice(index, 1);
            localStorage.setItem("cart", JSON.stringify(cartItems));
            loadCart();
        }

        function checkout() {
            alert("Redirecting to payment...");
            window.location.href = "payment.html";
        }

        window.onload = loadCart;
    </script>
</body>
</html>
